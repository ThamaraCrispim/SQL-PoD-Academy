# üìò Resumo ‚Äì SQL | Aula 1 (Academia PoD)

A **Aula 1** apresenta os fundamentos essenciais da linguagem SQL, abrangendo desde o conceito de bancos relacionais at√© a constru√ß√£o de consultas completas com filtros, ordena√ß√µes e agrega√ß√µes.

---

## 1. O que √© SQL?
**SQL** (*Structured Query Language*) √© a linguagem padr√£o para consultar, manipular e gerenciar dados em Bancos de Dados Relacionais.

* **Hist√≥ria:** Criada na d√©cada de 70 (IBM) por Donald Chamberlin e Raymond Boyce. Inicialmente chamada de **SEQUEL**.
* **Aplica√ß√µes:** Engenharia de Dados, Ci√™ncia de Dados, Desenvolvimento Web, BI e √Åreas de Neg√≥cio.

---

## 2. Varia√ß√µes de SQL (Dialetos)
Embora exista um padr√£o (ANSI SQL), cada SGBD (Sistema Gerenciador de Banco de Dados) possui particularidades na sintaxe.

**Exemplo de varia√ß√£o para limitar linhas:**

| Fun√ß√£o | MySQL | SQL Server | Oracle | SQLite/Postgres |
| :--- | :--- | :--- | :--- | :--- |
| **Limitar linhas** | `LIMIT 5` | `TOP 5` | `ROWNUM <= 5` | `LIMIT 5` |

---

## 3. Os 5 Tipos de Comandos SQL

### üõ†Ô∏è DDL ‚Äì Data Definition (Estrutura)
Comandos para criar ou alterar a estrutura do banco.
* `CREATE` (Criar)
* `ALTER` (Alterar)
* `DROP` (Excluir estrutura)

### üìù DML ‚Äì Data Manipulation (Dados)
Comandos para mexer nos dados dentro das tabelas.
* `INSERT` (Inserir)
* `UPDATE` (Atualizar)
* `DELETE` (Deletar dados)

### üîç DQL ‚Äì Data Query (Consulta)
O comando mais usado para an√°lise.
* `SELECT` (Selecionar/Ler)

### üîê DCL ‚Äì Data Control (Permiss√µes)
* `GRANT` (Dar permiss√£o)
* `REVOKE` (Retirar permiss√£o)

### üíæ TCL ‚Äì Transaction Control (Transa√ß√£o)
* `COMMIT` (Salvar definitivo)
* `ROLLBACK` (Desfazer)

---

## 4. Ferramenta: DBeaver
Software universal para administra√ß√£o de bancos de dados.
* **Conex√£o utilizada na aula:**

```text
Server: relational.fel.cvut.cz  
Port:   3306  
User:   guest  
Pass:   ctu-relational
```

---

## 5. Primeiras Consultas (SELECT)

Estrutura b√°sica de uma consulta:

**Selecionando colunas espec√≠ficas:**
```sql
SELECT placa, marca, ano
FROM tbl_cadastro_veiculo
LIMIT 5;
```

**Selecionando TUDO (`*`):**
```sql
SELECT *
FROM tbl_cadastro_veiculo
LIMIT 5;
```

> **Dicion√°rio:**
> * `SELECT`: Quais colunas eu quero ver?
> * `FROM`: De qual tabela?
> * `LIMIT`: Quantas linhas retornar?

---

## 6. Tipos de Dados Comuns

| Categoria | Tipos Principais |
| :--- | :--- |
| **Num√©ricos** | `INT`, `BIGINT`, `FLOAT`, `DOUBLE`, `DECIMAL` |
| **Texto** | `CHAR`, `VARCHAR`, `TEXT`, `LONGTEXT` |
| **Data/Hora** | `DATE`, `DATETIME`, `TIMESTAMP`, `YEAR`, `TIME` |

---

## 7. Ordena√ß√£o (ORDER BY)

Organiza o resultado da consulta.

```sql
SELECT placa, marca, ano
FROM tbl_cadastro_veiculo
ORDER BY ano DESC
LIMIT 10;
```
* **`ASC`**: Crescente (A-Z, 0-9) - *Padr√£o se n√£o especificar*.
* **`DESC`**: Decrescente (Z-A, 9-0).

---

## 8. Operadores

### ‚ûó Aritm√©ticos
`+` (Soma), `-` (Subtra√ß√£o), `*` (Multiplica√ß√£o), `/` (Divis√£o), `%` (M√≥dulo/Resto)

### ‚öñÔ∏è Compara√ß√£o
`=` (Igual), `<` (Menor), `>` (Maior), `<=` (Menor igual), `>=` (Maior igual), `!=` ou `<>` (Diferente)

### üß† L√≥gicos
* `AND` (E)
* `OR` (OU)
* `NOT` (N√ÉO)
* `IN` (Lista de valores)
* `BETWEEN` (Entre faixa de valores)
* `LIKE` (Busca por padr√£o de texto)

---

## 9. Filtros (WHERE)

O `WHERE` filtra as **linhas** antes de qualquer agrupamento.

**Filtro simples:**
```sql
SELECT * FROM tbl_cadastro_veiculo
WHERE marca = 'Fiat';
```

**M√∫ltiplas condi√ß√µes (AND / OR):**
```sql
WHERE marca = 'Fiat' AND ano = 2023; -- As duas condi√ß√µes devem ser verdadeiras
WHERE marca = 'Fiat' OR ano = 2023;  -- Pelo menos uma deve ser verdadeira
```

**Padr√µes de texto (LIKE):**
```sql
WHERE marca LIKE 'Aston%'; -- Come√ßa com "Aston" (ex: Aston Martin)
```

**Listas (IN) e Faixas (BETWEEN):**
```sql
WHERE marca IN ('Fiat', 'Audi', 'Ferrari');
WHERE valor BETWEEN 2000000 AND 3000000;
```

---

## 10. Fun√ß√µes de Agrega√ß√£o
Fun√ß√µes que resumem v√°rios dados em um s√≥ valor.

* `COUNT(*)`: Conta linhas.
* `SUM(coluna)`: Soma valores.
* `AVG(coluna)`: M√©dia.
* `MAX(coluna)`: Maior valor.
* `MIN(coluna)`: Menor valor.

```sql
SELECT 
    COUNT(placa) as total_carros,
    MAX(valor_tabela_fipe) as carro_mais_caro
FROM tbl_cadastro_veiculo;
```

---

## 11. Agrupamento (GROUP BY)
Obrigat√≥rio quando usamos fun√ß√µes de agrega√ß√£o junto com colunas normais.

```sql
SELECT 
    marca,
    MAX(valor_tabela_fipe) as valor_maximo,
    AVG(valor_tabela_fipe) as valor_medio,
    MIN(valor_tabela_fipe) as valor_minimo
FROM tbl_cadastro_veiculo
GROUP BY marca;
```

---

## 12. Filtro P√≥s-Agrega√ß√£o (HAVING)
Diferen√ßa chave:
* `WHERE`: Filtra linhas **antes** de agrupar.
* `HAVING`: Filtra o resultado **depois** de agrupar (ex: filtrar pela m√©dia ou soma).

```sql
SELECT marca, MAX(valor_tabela_fipe)
FROM tbl_cadastro_veiculo
GROUP BY marca
HAVING MAX(valor_tabela_fipe) > 10000000;
```

---

## 13. üèÜ A Consulta Completa

A uni√£o de todos os conceitos na ordem correta de sintaxe:

```sql
SELECT
    marca,
    MAX(valor_tabela_fipe) AS valor_max_fipe,
    AVG(valor_tabela_fipe) AS valor_media_fipe,
    MIN(valor_tabela_fipe) AS valor_min_fipe
FROM tbl_cadastro_veiculo
WHERE marca NOT IN ('Fiat', 'Audi', 'Ferrari')  -- 1. Filtra linhas
  AND ano BETWEEN 1990 AND 2022
GROUP BY marca                                  -- 2. Agrupa
HAVING MAX(valor_tabela_fipe) > 10000000        -- 3. Filtra grupos
ORDER BY valor_max_fipe DESC                    -- 4. Ordena
LIMIT 10;                                       -- 5. Limita
```
